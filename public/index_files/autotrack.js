(function(){var g="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function k(){k=function(){};h.Symbol||(h.Symbol=m)}var p=0;function m(a){return"jscomp_symbol_"+(a||"")+p++}
function q(){k();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&g(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return r(this)}});q=function(){}}function r(a){var b=0;return t(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function t(a){q();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}function u(a){q();var b=a[Symbol.iterator];return b?b.call(a):r(a)}
function v(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}var w=window.Element.prototype,x=w.matches||w.matchesSelector||w.webkitMatchesSelector||w.mozMatchesSelector||w.msMatchesSelector||w.oMatchesSelector;function y(a,b){if(a&&1==a.nodeType&&b){if("string"==typeof b||1==b.nodeType)return a==b||z(a,b);if("length"in b)for(var c=0,d;d=b[c];c++)if(a==d||z(a,d))return!0}return!1}
function z(a,b){if("string"!=typeof b)return!1;if(x)return x.call(a,b);b=a.parentNode.querySelectorAll(b);for(var c=0,d;d=b[c];c++)if(d==a)return!0;return!1}function A(a){for(var b=[];a&&a.parentNode&&1==a.parentNode.nodeType;)a=a.parentNode,b.push(a);return b}
function B(a,b,c){function d(a){var d;if(f.composed&&"function"==typeof a.composedPath)for(var e=a.composedPath(),l=0,n;n=e[l];l++)1==n.nodeType&&y(n,b)&&(d=n);else a:{if((d=a.target)&&1==d.nodeType&&b)for(d=[d].concat(A(d)),e=0;l=d[e];e++)if(y(l,b)){d=l;break a}d=void 0}d&&c.call(d,a,d)}var e=document,f={composed:!0,j:!0},f=void 0===f?{}:f;e.addEventListener(a,d,f.j);return{h:function(){e.removeEventListener(a,d,f.j)}}}
function C(a){var b={};if(!a||1!=a.nodeType)return b;a=a.attributes;if(!a.length)return{};for(var c=0,d;d=a[c];c++)b[d.name]=d.value;return b}var D=/:(80|443)$/,E=document.createElement("a"),F={};
function G(a){a=a&&"."!=a?a:location.href;if(F[a])return F[a];E.href=a;if("."==a.charAt(0)||"/"==a.charAt(0))return G(E.href);var b="80"==E.port||"443"==E.port?"":E.port,b="0"==b?"":b,c=E.host.replace(D,"");return F[a]={hash:E.hash,host:c,hostname:E.hostname,href:E.href,origin:E.origin?E.origin:E.protocol+"//"+c,pathname:"/"==E.pathname.charAt(0)?E.pathname:"/"+E.pathname,port:b,protocol:E.protocol,search:E.search}}
function H(a,b,c,d,e){if("function"==typeof d){var f=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,e);f(c)}}}return I({},a,b)}function J(a,b){var c=C(a),d={};Object.keys(c).forEach(function(a){if(!a.indexOf(b)&&a!=b+"on"){var f=c[a];"true"==f&&(f=!0);"false"==f&&(f=!1);a=K(a.slice(b.length));d[a]=f}});return d}function L(a){function b(){c||(c=!0,a())}var c=!1;setTimeout(b,2E3);return b}
var I=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var e=0;d=c[e];e++)for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(a[f]=d[f]);return a};function K(a){return a.replace(/[\-\_]+(\w?)/g,function(a,c){return c.toUpperCase()})}
function M(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b}var N={l:1,o:2,s:3,v:4,w:5,m:6,A:7,B:8,C:9,u:10},O=Object.keys(N).length;
function P(a,b){a.set("\x26_av","2.0.1");var c=a.get("\x26_au"),c=parseInt(c||"0",16).toString(2);if(c.length<O)for(var d=O-c.length;d;)c="0"+c,d--;b=O-b;c=c.substr(0,b)+1+c.substr(b+1);a.set("\x26_au",parseInt(c||"0",2).toString(16))}
function Q(a,b){var c=this;P(a,N.m);window.addEventListener&&(this.a=I({events:["click"],linkSelector:"a, area",shouldTrackOutboundLink:this.shouldTrackOutboundLink,fieldsObj:{},attributePrefix:"ga-"},b),this.f=a,this.c=this.c.bind(this),this.b={},this.a.events.forEach(function(a){c.b[a]=B(a,c.a.linkSelector,c.c)}))}
Q.prototype.c=function(a,b){if(this.a.shouldTrackOutboundLink(b,G)){var c=b.getAttribute("href")||b.getAttribute("xlink:href"),d=G(c),e={transport:"beacon",eventCategory:"Outbound Link",eventAction:a.type,eventLabel:d.href};navigator.sendBeacon||"click"!=a.type||"_blank"==b.target||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||1<a.which||window.addEventListener("click",function(a){a.defaultPrevented||(a.preventDefault(),e.hitCallback=L(function(){location.href=c}))});a=I({},this.a.fieldsObj,J(b,this.a.attributePrefix));
this.f.send("event",H(e,a,this.f,this.a.hitFilter,b))}};Q.prototype.shouldTrackOutboundLink=function(a,b){a=a.getAttribute("href")||a.getAttribute("xlink:href");b=b(a);return b.hostname!=location.hostname&&"http"==b.protocol.slice(0,4)};Q.prototype.remove=function(){var a=this;Object.keys(this.b).forEach(function(b){a.b[b].h()})};M("outboundLinkTracker",Q);var R=[];
function S(a,b){var c=this;this.context=a;this.i=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.a=[];this.b=[];this.g=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.b[c.b.length-1].apply(null,[].concat(b instanceof Array?b:v(u(b))))};this.c?a.set(b,this.g):a[b]=this.g}function T(a,b){b=a.a.indexOf(b);-1<b&&(a.a.splice(b,1),0<a.a.length?U(a):a.h())}function U(a){a.b=[];for(var b,c=0;b=a.a[c];c++){var d=a.b[c-1]||a.f.bind(a.context);a.b.push(b(d))}}
S.prototype.h=function(){var a=R.indexOf(this);-1<a&&(R.splice(a,1),this.c?this.context.set(this.i,this.f):this.context[this.i]=this.f)};function V(a,b){var c=R.filter(function(c){return c.context==a&&c.i==b})[0];c||(c=new S(a,b),R.push(c));return c}
function W(a,b){P(a,N.l);this.a=I({},b);this.g=a;this.b=this.a.stripQuery&&this.a.queryDimensionIndex?"dimension"+this.a.queryDimensionIndex:null;this.f=this.f.bind(this);this.c=this.c.bind(this);b=this.f;var c=V(a,"get");c.a.push(b);U(c);b=this.c;a=V(a,"buildHitTask");a.a.push(b);U(a)}W.prototype.f=function(a){var b=this;return function(c){if("page"==c||c==b.b){var d={location:a("location"),page:a("page")};return X(b,d)[c]}return a(c)}};
W.prototype.c=function(a){var b=this;return function(c){var d=X(b,{location:c.get("location"),page:c.get("page")});c.set(d,null,!0);a(c)}};
function X(a,b){var c=G(b.page||b.location),d=c.pathname;if(a.a.indexFilename){var e=d.split("/");a.a.indexFilename==e[e.length-1]&&(e[e.length-1]="",d=e.join("/"))}"remove"==a.a.trailingSlash?d=d.replace(/\/+$/,""):"add"==a.a.trailingSlash&&(/\.\w+$/.test(d)||"/"==d.substr(-1)||(d+="/"));d={page:d+(a.a.stripQuery?"":c.search)};b.location&&(d.location=b.location);a.b&&(d[a.b]=c.search.slice(1)||"(not set)");return"function"==typeof a.a.urlFieldsFilter?(b=a.a.urlFieldsFilter(d,G),c={},c.page=b.page,
c.location=b.location,c[a.b]=b[a.b],c):d}W.prototype.remove=function(){var a=this.f;T(V(this.g,"get"),a);a=this.c;T(V(this.g,"buildHitTask"),a)};M("cleanUrlTracker",W);})();
//# sourceMappingURL=autotrack.js.map